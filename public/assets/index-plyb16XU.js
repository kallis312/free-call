import{u as h,j as s,f as p,r as n,a as u,B as g}from"./index-7QkhwWCv.js";import{A as j}from"./AppModal-_4G-YR6u.js";import{I as b}from"./ImageHeader-OrQcoQrR.js";import"./GoBack-1fQ7s6_O.js";const f=({contact:e,isOpen:t,setIsOpen:a=()=>{}})=>{const i=h();return s.jsxs(j,{isOpen:t,setIsOpen:a,children:[s.jsxs("div",{children:[e==null?void 0:e.name,", ",(e==null?void 0:e.phone)||(e==null?void 0:e.email)]}),s.jsxs("div",{className:"grid-cols-2 gap-3 grid",children:[s.jsx("button",{children:s.jsx("img",{src:"/rsc/call_btn.png",width:120,className:"h-[77px]"})}),s.jsx("button",{children:s.jsx("img",{src:"/rsc/amend_btn.png",width:120,className:"h-[77px]"})}),(e==null?void 0:e.type)==="company"?s.jsx("button",{children:s.jsx("img",{src:"/rsc/5.png",width:120,className:"h-[77px]"})}):s.jsx("button",{children:s.jsx("img",{src:"/rsc/6.jpg",width:120,className:"h-[77px]"})}),s.jsx("button",{children:s.jsx("img",{src:"/rsc/goback_btn.png",onClick:()=>a(!1),width:120,className:"h-[77px]"})})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>i("/calling/send/"+(e==null?void 0:e.phone)),className:"w-full red-grad-bg py-3 text-white text-2xl font-bold rounded-md mt-3 border-4 border-red-600 shadow-lg",children:"履歴から削除"})}),s.jsx("div",{className:"flex justify-center mt-3",children:s.jsx("button",{children:s.jsx("img",{src:"/rsc/delete_btn.png",width:120,className:"h-[77px]"})})})]})},C=()=>{const{type:e}=p(),[t,a]=n.useState([]),[i,o]=n.useState(!1),d=n.useRef();n.useEffect(()=>{if(e)c(e);else throw Error("Type Error.")},[e]);const c=async r=>{try{const{data:l}=await u.get("/contacts",{params:{type:r}});a(l)}catch(l){g.error(l instanceof Error?l.message:"Unknown Error.")}},m=async()=>{try{const r=await navigator.contacts.select(["name","email","tel"],{multiple:!0});console.log(r)}catch(r){console.error(r instanceof Error?r.message:r)}},x=r=>{d.current=r,o(!0)};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-primary w-full h-full flex flex-col overflow-auto",children:[s.jsx(b,{}),s.jsxs("div",{className:"p-2 border-b border-solid border-gray-300 flex justify-between items-end",children:[s.jsx("div",{className:"text-red-400 text-xs",children:"連絡先リストが空です"}),s.jsx("button",{onClick:m,className:"bg-[#00B050] py-1 px-2 shadow-md text-white",children:"連絡先をロード"})]}),s.jsx("div",{className:"h-full mt-1 overflow-auto flex flex-col",children:t.map((r,l)=>s.jsxs("div",{className:"border-b p-2 border-gray-300 rounded-sm",onClick:()=>x(r),children:[s.jsx("div",{children:r.name||"Unknown User"}),s.jsx("div",{className:"text-lg",children:r.phone||"No Phone Number"})]},l))}),s.jsx(f,{contact:d.current,isOpen:i,setIsOpen:o})]})})};export{C as default};
